import{r as l,R as z,u as J,j as r}from"./index-lzp0IrVI.js";import{c as y,B as w}from"./createLucideIcon-DcxS4L3l.js";import{C as H,a as E,b as F,c as T}from"./card-CQEw-KxR.js";import{p as P}from"./chordParser-CHgtmwyG.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],G=y("arrow-left",D);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],M=y("check",V);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],U=y("copy",q);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],X=y("trash-2",Y);function k(){return k=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)({}).hasOwnProperty.call(n,t)&&(i[t]=n[t])}return i},k.apply(null,arguments)}function Z(i,e){if(i==null)return{};var n={};for(var t in i)if({}.hasOwnProperty.call(i,t)){if(e.indexOf(t)!==-1)continue;n[t]=i[t]}return n}var K=l.useLayoutEffect,Q=function(e){var n=z.useRef(e);return K(function(){n.current=e}),n},A=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},ee=function(e,n){var t=z.useRef();return z.useCallback(function(o){e.current=o,t.current&&A(t.current,null),t.current=n,n&&A(n,o)},[n])},I={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},te=function(e){Object.keys(I).forEach(function(n){e.style.setProperty(n,I[n],"important")})},W=te,s=null,O=function(e,n){var t=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?t+n.borderSize:t-n.paddingSize};function re(i,e,n,t){n===void 0&&(n=1),t===void 0&&(t=1/0),s||(s=document.createElement("textarea"),s.setAttribute("tabindex","-1"),s.setAttribute("aria-hidden","true"),W(s)),s.parentNode===null&&document.body.appendChild(s);var o=i.paddingSize,c=i.borderSize,d=i.sizingStyle,f=d.boxSizing;Object.keys(d).forEach(function(h){var x=h;s.style[x]=d[x]}),W(s),s.value=e;var u=O(s,i);s.value=e,u=O(s,i),s.value="x";var p=s.scrollHeight-o,g=p*n;f==="border-box"&&(g=g+o+c),u=Math.max(g,u);var a=p*t;return f==="border-box"&&(a=a+o+c),u=Math.min(a,u),[u,p]}var _=function(){},ne=function(e,n){return e.reduce(function(t,o){return t[o]=n[o],t},{})},ie=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],ae=!!document.documentElement.currentStyle,oe=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var t=ne(ie,n),o=t.boxSizing;if(o==="")return null;ae&&o==="border-box"&&(t.width=parseFloat(t.width)+parseFloat(t.borderRightWidth)+parseFloat(t.borderLeftWidth)+parseFloat(t.paddingRight)+parseFloat(t.paddingLeft)+"px");var c=parseFloat(t.paddingBottom)+parseFloat(t.paddingTop),d=parseFloat(t.borderBottomWidth)+parseFloat(t.borderTopWidth);return{sizingStyle:t,paddingSize:c,borderSize:d}},se=oe;function L(i,e,n){var t=Q(n);l.useLayoutEffect(function(){var o=function(d){return t.current(d)};if(i)return i.addEventListener(e,o),function(){return i.removeEventListener(e,o)}},[])}var de=function(e,n){L(document.body,"reset",function(t){e.current.form===t.target&&n(t)})},le=function(e){L(window,"resize",e)},ce=function(e){L(document.fonts,"loadingdone",e)},ue=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],he=function(e,n){var t=e.cacheMeasurements,o=e.maxRows,c=e.minRows,d=e.onChange,f=d===void 0?_:d,u=e.onHeightChange,p=u===void 0?_:u,g=Z(e,ue),a=g.value!==void 0,h=l.useRef(null),x=ee(h,n),j=l.useRef(0),S=l.useRef(),v=function(){var m=h.current,N=t&&S.current?S.current:se(m);if(N){S.current=N;var R=re(N,m.value||m.placeholder||"x",c,o),b=R[0],$=R[1];j.current!==b&&(j.current=b,m.style.setProperty("height",b+"px","important"),p(b,{rowHeight:$}))}},B=function(m){a||v(),f(m)};return l.useLayoutEffect(v),de(h,function(){if(!a){var C=h.current.value;requestAnimationFrame(function(){var m=h.current;m&&C!==m.value&&v()})}}),le(v),ce(v),l.createElement("textarea",k({},g,{onChange:B,ref:x}))},fe=l.forwardRef(he);function ve(){const i=J(),[e,n]=l.useState(()=>{const a=localStorage.getItem("song-editor-data");return a?JSON.parse(a):{id:"",title:"",artist:"",lyrics:""}}),[t,o]=l.useState(!1),[c,d]=l.useState(!1),f=(a,h)=>{n(x=>({...x,[a]:h}))};l.useEffect(()=>{localStorage.setItem("song-editor-data",JSON.stringify(e))},[e]);const u=()=>{n({id:"",title:"",artist:"",lyrics:""}),d(!0),setTimeout(()=>d(!1),2e3)},p=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(e,null,2)),o(!0),setTimeout(()=>o(!1),2e3)}catch(a){console.error("Failed to copy JSON:",a)}},g=()=>{i({to:"/"})};return r.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center justify-start mb-4",children:r.jsxs(w,{onClick:g,variant:"outline",children:[r.jsx(G,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline ml-2",children:"Back to Songs"})]})}),r.jsx("h1",{className:"text-3xl font-bold text-center",children:"Song Editor"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(H,{children:[r.jsx(E,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Song Details"}),r.jsxs(w,{onClick:u,variant:c?"default":"outline",size:"sm",children:[c?r.jsx(M,{className:"h-4 w-4 mr-2"}):r.jsx(X,{className:"h-4 w-4 mr-2"}),c?"Cleared!":"Clear All"]})]})}),r.jsxs(T,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"id",className:"block text-sm font-medium mb-2",children:"Song ID"}),r.jsx("input",{id:"id",type:"text",value:e.id,onChange:a=>f("id",a.target.value),placeholder:"e.g., my-song-id",className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Title"}),r.jsx("input",{id:"title",type:"text",value:e.title,onChange:a=>f("title",a.target.value),placeholder:"e.g., My Amazing Song",className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"artist",className:"block text-sm font-medium mb-2",children:"Artist"}),r.jsx("input",{id:"artist",type:"text",value:e.artist,onChange:a=>f("artist",a.target.value),placeholder:"e.g., John Doe",className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lyrics",className:"block text-sm font-medium mb-2",children:"Lyrics (with chords)"}),r.jsx(fe,{id:"lyrics",value:e.lyrics,onChange:a=>f("lyrics",a.target.value),placeholder:"Enter lyrics with chords in square brackets, e.g., [C] Hello world [G] this is a song",minRows:8,maxRows:28,className:"w-full px-3 py-2 border border-border rounded-md bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Use square brackets for chords: [C], [Am], [F], [G], etc."}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Use "## " for section headers: ## Verse 1, ## Chorus, ## Bridge, etc.'})]})]})]}),r.jsxs(H,{children:[r.jsx(E,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(F,{children:"Song Preview"}),r.jsxs(w,{onClick:p,size:"sm",variant:t?"default":"outline",children:[t?r.jsx(M,{className:"h-4 w-4 mr-2"}):r.jsx(U,{className:"h-4 w-4 mr-2"}),t?"Copied!":"Copy JSON"]})]})}),r.jsx(T,{children:e.title||e.artist||e.lyrics?r.jsxs("div",{className:"space-y-4",children:[(e.title||e.artist)&&r.jsxs("div",{className:"text-center border-b pb-4",children:[e.title&&r.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:e.title}),e.artist&&r.jsxs("p",{className:"text-muted-foreground",children:["by ",e.artist]})]}),e.lyrics&&r.jsx("div",{className:"leading-relaxed",children:e.lyrics.split(`

`).map((a,h)=>r.jsx("div",{className:"mb-4",children:a.split(`
`).map(x=>P(x))},h))})]}):r.jsx("div",{className:"text-center text-muted-foreground py-8",children:r.jsx("p",{children:"Start typing to see your song preview..."})})})]})]})]})}export{ve as component};
